<head>
<title>HepMC Reference Documentation </title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#FFFFFF">

<!-------------------------------- Header ---------------------------->
<table width="100%" border="1" height="70" cellpadding="10">
  <tr bgcolor="#FFFFCC"> 
    <td width="16%" height="64" valign="middle" align="center" bgcolor="#FFFFCC">
     <!-- #BeginLibraryItem" -->
      <img src="http://spi.cern.ch//LCG logo.jpg" width="61" height="61">
     <!-- #EndLibraryItem --> 
    </td>
    <td width="84%" height="64" valign="middle" align="center">
	<h1>HepMC Reference Documentation</h1> 
	<a href=http://lcgapp.cern.ch/project/simu/HepMC/>HepMC</a>
    </td> 
  </tr>
</table>
<p>
<!-- Generated by Doxygen 1.5.1-3 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_6f5e1fd014b545bac6b7a8ff1c591f69.html">src</a></div>
<h1>GenEvent.cc</h1><a href="GenEvent_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="comment">// Matt.Dobbs@Cern.CH, September 1999</span>
<a name="l00003"></a>00003 <span class="comment">// Updated: 7.1.2000 iterators complete and working!</span>
<a name="l00004"></a>00004 <span class="comment">// Updated: 10.1.2000 GenEvent::vertex, particle iterators are made </span>
<a name="l00005"></a>00005 <span class="comment">//                    constant WRT this event ... note that </span>
<a name="l00006"></a>00006 <span class="comment">//                    GenVertex::***_iterator is not const, since it must</span>
<a name="l00007"></a>00007 <span class="comment">//                    be able to return a mutable pointer to itself.</span>
<a name="l00008"></a>00008 <span class="comment">// Updated: 08.2.2000 the event now holds a set of all attached vertices</span>
<a name="l00009"></a>00009 <span class="comment">//                    rather than just the roots of the graph</span>
<a name="l00010"></a>00010 <span class="comment">// Event record for MC generators (for use at any stage of generation)</span>
<a name="l00012"></a>00012 <span class="comment"></span>
<a name="l00013"></a>00013 <span class="preprocessor">#include "<a class="code" href="GenEvent_8h.html">HepMC/GenEvent.h</a>"</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include "<a class="code" href="Version_8h.html">HepMC/Version.h</a>"</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="keyword">namespace </span>HepMC {
<a name="l00017"></a>00017 
<a name="l00018"></a>00018     <a class="code" href="classHepMC_1_1GenEvent.html#ebd5782f77f42f9ffbfdeb5c417ee673" title="default constructor creates null pointers to HeavyIon and PdfInfo">GenEvent::GenEvent</a>( <span class="keywordtype">int</span> signal_process_id, 
<a name="l00019"></a>00019                         <span class="keywordtype">int</span> event_number,
<a name="l00020"></a>00020                         GenVertex* signal_vertex,
<a name="l00021"></a>00021                         <span class="keyword">const</span> WeightContainer&amp; weights,
<a name="l00022"></a>00022                         <span class="keyword">const</span> std::vector&lt;long int&gt;&amp; random_states ) :
<a name="l00023"></a>00023         m_signal_process_id(signal_process_id), 
<a name="l00024"></a>00024         m_event_number(event_number),
<a name="l00025"></a>00025         m_mpi(-1),
<a name="l00026"></a>00026         m_event_scale(-1), 
<a name="l00027"></a>00027         m_alphaQCD(-1), 
<a name="l00028"></a>00028         m_alphaQED(-1),
<a name="l00029"></a>00029         m_signal_process_vertex(signal_vertex), 
<a name="l00030"></a>00030         m_beam_particle_1(0),
<a name="l00031"></a>00031         m_beam_particle_2(0),
<a name="l00032"></a>00032         m_weights(weights),
<a name="l00033"></a>00033         m_random_states(random_states),
<a name="l00034"></a>00034         m_vertex_barcodes(),
<a name="l00035"></a>00035         m_particle_barcodes(),
<a name="l00036"></a>00036         m_heavy_ion(0), 
<a name="l00037"></a>00037         m_pdf_info(0)
<a name="l00038"></a>00038     {
<a name="l00043"></a>00043         ++s_counter;
<a name="l00044"></a>00044     }
<a name="l00045"></a>00045 
<a name="l00046"></a>00046     GenEvent::GenEvent( <span class="keywordtype">int</span> signal_process_id, <span class="keywordtype">int</span> event_number,
<a name="l00047"></a>00047                         GenVertex* signal_vertex,
<a name="l00048"></a>00048                         <span class="keyword">const</span> WeightContainer&amp; weights,
<a name="l00049"></a>00049                         <span class="keyword">const</span> std::vector&lt;long int&gt;&amp; random_states,
<a name="l00050"></a>00050                         <span class="keyword">const</span> HeavyIon&amp; ion, 
<a name="l00051"></a>00051                         <span class="keyword">const</span> PdfInfo&amp; pdf ) :
<a name="l00052"></a>00052         m_signal_process_id(signal_process_id), 
<a name="l00053"></a>00053         m_event_number(event_number),
<a name="l00054"></a>00054         m_mpi(-1),
<a name="l00055"></a>00055         m_event_scale(-1), 
<a name="l00056"></a>00056         m_alphaQCD(-1), 
<a name="l00057"></a>00057         m_alphaQED(-1),
<a name="l00058"></a>00058         m_signal_process_vertex(signal_vertex), 
<a name="l00059"></a>00059         m_beam_particle_1(0),
<a name="l00060"></a>00060         m_beam_particle_2(0),
<a name="l00061"></a>00061         m_weights(weights),
<a name="l00062"></a>00062         m_random_states(random_states), 
<a name="l00063"></a>00063         m_vertex_barcodes(),
<a name="l00064"></a>00064         m_particle_barcodes(),
<a name="l00065"></a>00065         m_heavy_ion( new HeavyIon(ion) ), 
<a name="l00066"></a>00066         m_pdf_info( new PdfInfo(pdf) )
<a name="l00067"></a>00067     {
<a name="l00072"></a>00072         ++s_counter;
<a name="l00073"></a>00073     }
<a name="l00074"></a>00074 
<a name="l00075"></a><a class="code" href="classHepMC_1_1GenEvent.html#a17a3163db7b0db600442272464a6ce4">00075</a>     <a class="code" href="classHepMC_1_1GenEvent.html#ebd5782f77f42f9ffbfdeb5c417ee673" title="default constructor creates null pointers to HeavyIon and PdfInfo">GenEvent::GenEvent</a>( <span class="keyword">const</span> <a class="code" href="classHepMC_1_1GenEvent.html" title="The GenEvent class is the core of HepMC.">GenEvent</a>&amp; inevent ) 
<a name="l00076"></a>00076       : m_signal_process_id    ( <span class="comment">/* inevent.m_signal_process_id */</span> ),
<a name="l00077"></a>00077         m_event_number         ( <span class="comment">/* inevent.m_event_number */</span> ),
<a name="l00078"></a>00078         m_mpi                  ( <span class="comment">/* inevent.m_mpi */</span> ),
<a name="l00079"></a>00079         m_event_scale          ( <span class="comment">/* inevent.m_event_scale */</span> ),
<a name="l00080"></a>00080         m_alphaQCD             ( <span class="comment">/* inevent.m_alphaQCD */</span> ),
<a name="l00081"></a>00081         m_alphaQED             ( <span class="comment">/* inevent.m_alphaQED */</span> ),
<a name="l00082"></a>00082         m_signal_process_vertex( <span class="comment">/* inevent.m_signal_process_vertex */</span> ),
<a name="l00083"></a>00083         m_beam_particle_1      ( <span class="comment">/* inevent.m_beam_particle_1 */</span> ),
<a name="l00084"></a>00084         m_beam_particle_2      ( <span class="comment">/* inevent.m_beam_particle_2 */</span> ),
<a name="l00085"></a>00085         m_weights              ( <span class="comment">/* inevent.m_weights */</span> ),
<a name="l00086"></a>00086         m_random_states        ( <span class="comment">/* inevent.m_random_states */</span> ),
<a name="l00087"></a>00087         m_vertex_barcodes      ( <span class="comment">/* inevent.m_vertex_barcodes */</span> ),
<a name="l00088"></a>00088         m_particle_barcodes    ( <span class="comment">/* inevent.m_particle_barcodes */</span> ),
<a name="l00089"></a>00089         m_heavy_ion            ( inevent.heavy_ion() ? new <a class="code" href="classHepMC_1_1HeavyIon.html" title="The HeavyIon class stores information about heavy ions.">HeavyIon</a>(*inevent.heavy_ion()) : 0 ),
<a name="l00090"></a>00090         m_pdf_info             ( inevent.pdf_info() ? new <a class="code" href="classHepMC_1_1PdfInfo.html" title="The PdfInfo class stores PDF information.">PdfInfo</a>(*inevent.pdf_info()) : 0 )
<a name="l00091"></a>00091     {
<a name="l00093"></a>00093         ++s_counter;
<a name="l00095"></a>00095         <span class="comment">//</span>
<a name="l00096"></a>00096 
<a name="l00097"></a>00097         <span class="comment">// 1. create a NEW copy of all vertices from inevent</span>
<a name="l00098"></a>00098         <span class="comment">//    taking care to map new vertices onto the vertices being copied</span>
<a name="l00099"></a>00099         <span class="comment">//    and add these new vertices to this event.</span>
<a name="l00100"></a>00100         <span class="comment">//    We do not use GenVertex::operator= because that would copy</span>
<a name="l00101"></a>00101         <span class="comment">//    the attached particles as well.</span>
<a name="l00102"></a>00102         std::map&lt;const GenVertex*,GenVertex*&gt; map_in_to_new;
<a name="l00103"></a>00103         <span class="keywordflow">for</span> ( <a class="code" href="classHepMC_1_1GenEvent_1_1vertex__const__iterator.html" title="const vertex iterator">GenEvent::vertex_const_iterator</a> <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a> = inevent.<a class="code" href="classHepMC_1_1GenEvent.html#f4cea6163a1a320ac732318ca89cd5bc" title="begin vertex iteration">vertices_begin</a>();
<a name="l00104"></a>00104               <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a> != inevent.<a class="code" href="classHepMC_1_1GenEvent.html#a6fd4a90d8eb096f95215ad5c18d6a7c" title="end vertex iteration">vertices_end</a>(); ++<a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a> ) {
<a name="l00105"></a>00105             <a class="code" href="classHepMC_1_1GenVertex.html" title="GenVertex contains information about decay vertices.">GenVertex</a>* newvertex = <span class="keyword">new</span> <a class="code" href="classHepMC_1_1GenEvent.html#79e1f60c84635d80d7e15cbab25260bd">GenVertex</a>(
<a name="l00106"></a>00106                 (*v)-&gt;position(), (*v)-&gt;id(), (*v)-&gt;weights() );
<a name="l00107"></a>00107             newvertex-&gt;suggest_barcode( (*v)-&gt;barcode() );
<a name="l00108"></a>00108             map_in_to_new[*<a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a>] = newvertex;
<a name="l00109"></a>00109             <a class="code" href="classHepMC_1_1GenEvent.html#351fd8c688bb1791877a56a956c8b005" title="adds to evt and adopts">add_vertex</a>( newvertex );
<a name="l00110"></a>00110         }
<a name="l00111"></a>00111         <span class="comment">// 2. copy the signal process vertex info.</span>
<a name="l00112"></a>00112         <span class="keywordflow">if</span> ( inevent.<a class="code" href="classHepMC_1_1GenEvent.html#80d2394d34be19132b18a2c0c4edd8cf" title="pointer to the vertex containing the signal process">signal_process_vertex</a>() ) {
<a name="l00113"></a>00113             <a class="code" href="classHepMC_1_1GenEvent.html#32f00631c76556295ab3963062436abb" title="set pointer to the vertex containing the signal process">set_signal_process_vertex</a>( 
<a name="l00114"></a>00114                 map_in_to_new[inevent.<a class="code" href="classHepMC_1_1GenEvent.html#80d2394d34be19132b18a2c0c4edd8cf" title="pointer to the vertex containing the signal process">signal_process_vertex</a>()] );
<a name="l00115"></a>00115         } <span class="keywordflow">else</span> <a class="code" href="classHepMC_1_1GenEvent.html#32f00631c76556295ab3963062436abb" title="set pointer to the vertex containing the signal process">set_signal_process_vertex</a>( 0 );
<a name="l00116"></a>00116         <span class="comment">//</span>
<a name="l00117"></a>00117         <span class="comment">// 3. create a NEW copy of all particles from inevent</span>
<a name="l00118"></a>00118         <span class="comment">//    taking care to attach them to the appropriate </span>
<a name="l00119"></a>00119         <a class="code" href="classHepMC_1_1GenParticle.html" title="The GenParticle class contains information about generated particles.">GenParticle</a>* beam1(0);
<a name="l00120"></a>00120         <a class="code" href="classHepMC_1_1GenParticle.html" title="The GenParticle class contains information about generated particles.">GenParticle</a>* beam2(0);
<a name="l00121"></a>00121         <span class="keywordflow">for</span> ( <a class="code" href="classHepMC_1_1GenEvent_1_1particle__const__iterator.html" title="const particle iterator">GenEvent::particle_const_iterator</a> <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a> = inevent.<a class="code" href="classHepMC_1_1GenEvent.html#a7e3c5e99982b837a5dddac952467919" title="begin particle iteration">particles_begin</a>();
<a name="l00122"></a>00122               <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a> != inevent.<a class="code" href="classHepMC_1_1GenEvent.html#facd3ef23718acc13770f2dc467836e9" title="end particle iteration">particles_end</a>(); ++<a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a> ) 
<a name="l00123"></a>00123         {
<a name="l00124"></a>00124             <a class="code" href="classHepMC_1_1GenParticle.html" title="The GenParticle class contains information about generated particles.">GenParticle</a>* oldparticle = *<a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a>;
<a name="l00125"></a>00125             <a class="code" href="classHepMC_1_1GenParticle.html" title="The GenParticle class contains information about generated particles.">GenParticle</a>* newparticle = <span class="keyword">new</span> <a class="code" href="classHepMC_1_1GenEvent.html#da4e3c3672a6ef84e4980c5a80dc9d3f">GenParticle</a>(*oldparticle);
<a name="l00126"></a>00126             <span class="keywordflow">if</span> ( oldparticle-&gt;end_vertex() ) {
<a name="l00127"></a>00127                 map_in_to_new[ oldparticle-&gt;end_vertex() ]-&gt;
<a name="l00128"></a>00128                                          add_particle_in(newparticle);
<a name="l00129"></a>00129             }
<a name="l00130"></a>00130             <span class="keywordflow">if</span> ( oldparticle-&gt;production_vertex() ) {
<a name="l00131"></a>00131                 map_in_to_new[ oldparticle-&gt;production_vertex() ]-&gt;
<a name="l00132"></a>00132                                          add_particle_out(newparticle);
<a name="l00133"></a>00133             }
<a name="l00134"></a>00134             <span class="keywordflow">if</span> ( oldparticle == inevent.<a class="code" href="classHepMC_1_1GenEvent.html#eebe9840d64ec5e75efa81dbb500d7a0" title="pair of pointers to the two incoming beam particles">beam_particles</a>().first ) beam1 = newparticle;
<a name="l00135"></a>00135             <span class="keywordflow">if</span> ( oldparticle == inevent.<a class="code" href="classHepMC_1_1GenEvent.html#eebe9840d64ec5e75efa81dbb500d7a0" title="pair of pointers to the two incoming beam particles">beam_particles</a>().second ) beam2 = newparticle;
<a name="l00136"></a>00136         }
<a name="l00137"></a>00137         <a class="code" href="classHepMC_1_1GenEvent.html#fc5841ea5b2f05df61a36579c428769e" title="set incoming beam particles">set_beam_particles</a>( beam1, beam2 );
<a name="l00138"></a>00138         <span class="comment">//</span>
<a name="l00139"></a>00139         <span class="comment">// 4. now that vtx/particles are copied, do everything else</span>
<a name="l00140"></a>00140         <a class="code" href="classHepMC_1_1GenEvent.html#5699139ca3c227ee2dd6d09fb9d79f79" title="set unique signal process id">set_signal_process_id</a>( inevent.<a class="code" href="classHepMC_1_1GenEvent.html#78279e392dff2c2c471782531f3d9892" title="unique signal process id">signal_process_id</a>() );
<a name="l00141"></a>00141         <a class="code" href="classHepMC_1_1GenEvent.html#84278cf4e4ce807d60f99d9288c1ad8e" title="set event number">set_event_number</a>( inevent.<a class="code" href="classHepMC_1_1GenEvent.html#f288e7a4cdeb1e4feb0f8ef1c59b24af" title="event number">event_number</a>() );
<a name="l00142"></a>00142         <a class="code" href="classHepMC_1_1GenEvent.html#c9082a49ea03a2ae3a83b629a86ec25d" title="set energy scale">set_event_scale</a>( inevent.<a class="code" href="classHepMC_1_1GenEvent.html#dc50003fa5882060e15367af393b72cf" title="energy scale, see hep-ph/0109068">event_scale</a>() );
<a name="l00143"></a>00143         <a class="code" href="classHepMC_1_1GenEvent.html#cf096038dfa2c33530b68f369efb0f3e" title="set QCD coupling">set_alphaQCD</a>( inevent.<a class="code" href="classHepMC_1_1GenEvent.html#6b58ada08199748d004c946a21142330" title="QCD coupling, see hep-ph/0109068.">alphaQCD</a>() );
<a name="l00144"></a>00144         <a class="code" href="classHepMC_1_1GenEvent.html#cd4b2177ad350927e80b7f7cb9239d40" title="set QED coupling">set_alphaQED</a>( inevent.<a class="code" href="classHepMC_1_1GenEvent.html#8dfff09cf3eec2c2e9fc416b24138bc2">alphaQED</a>() );
<a name="l00145"></a>00145         <a class="code" href="classHepMC_1_1GenEvent.html#af54674d701fa836b7ebe257e84b14a1" title="Use this to set the number of multi parton interactions in each event.">set_mpi</a>( inevent.<a class="code" href="classHepMC_1_1GenEvent.html#2849e856b5fa415e4a40b0f69f8ff175" title="number of multi parton interactions">mpi</a>() );
<a name="l00146"></a>00146         <a class="code" href="classHepMC_1_1GenEvent.html#78e1df76d398dfef881792667ecfb4a8" title="provide random state information">set_random_states</a>( inevent.<a class="code" href="classHepMC_1_1GenEvent.html#a1aed0748ead0b274d757fd181eaceeb" title="vector of integers containing information about the random state">random_states</a>() );
<a name="l00147"></a>00147         <a class="code" href="classHepMC_1_1GenEvent.html#3d91498964d094e3dfb8f8322315879a" title="direct access to WeightContainer">weights</a>() = inevent.<a class="code" href="classHepMC_1_1GenEvent.html#3d91498964d094e3dfb8f8322315879a" title="direct access to WeightContainer">weights</a>();
<a name="l00148"></a>00148     }
<a name="l00149"></a>00149 
<a name="l00150"></a><a class="code" href="classHepMC_1_1GenEvent.html#b91e22dac83e6d886491816a8d993545">00150</a>     <span class="keywordtype">void</span> <a class="code" href="classHepMC_1_1GenEvent.html#b91e22dac83e6d886491816a8d993545" title="swap">GenEvent::swap</a>( <a class="code" href="classHepMC_1_1GenEvent.html" title="The GenEvent class is the core of HepMC.">GenEvent</a> &amp; other )
<a name="l00151"></a>00151     {
<a name="l00152"></a>00152         <span class="comment">// if a container has a swap method, use that for improved performance</span>
<a name="l00153"></a>00153         std::swap(m_signal_process_id    , other.<a class="code" href="classHepMC_1_1GenEvent.html#3c2ef93c445ca3746d11894c920f3066">m_signal_process_id</a>    );
<a name="l00154"></a>00154         std::swap(m_event_number         , other.<a class="code" href="classHepMC_1_1GenEvent.html#a77944719d8944bb8bb6f216ec61ff86">m_event_number</a>         );
<a name="l00155"></a>00155         std::swap(m_mpi                  , other.<a class="code" href="classHepMC_1_1GenEvent.html#e0feb9c1fe07be07a9fddaafc5320afe">m_mpi</a>                  );
<a name="l00156"></a>00156         std::swap(m_event_scale          , other.<a class="code" href="classHepMC_1_1GenEvent.html#eb4bb20b471eecd8f3aa49f574c90e18">m_event_scale</a>          );
<a name="l00157"></a>00157         std::swap(m_alphaQCD             , other.<a class="code" href="classHepMC_1_1GenEvent.html#f38a078622e4e93a672082ef2abcb95f">m_alphaQCD</a>             );
<a name="l00158"></a>00158         std::swap(m_alphaQED             , other.<a class="code" href="classHepMC_1_1GenEvent.html#4214048def262cf5d840925699ec80c8">m_alphaQED</a>             );
<a name="l00159"></a>00159         std::swap(m_signal_process_vertex, other.<a class="code" href="classHepMC_1_1GenEvent.html#1b2d69a80b136ed5904eca26e68db5ea">m_signal_process_vertex</a>);
<a name="l00160"></a>00160         std::swap(m_beam_particle_1      , other.<a class="code" href="classHepMC_1_1GenEvent.html#0575d3da94c5d6cf33de282bb8bf8695">m_beam_particle_1</a>      );
<a name="l00161"></a>00161         std::swap(m_beam_particle_2      , other.<a class="code" href="classHepMC_1_1GenEvent.html#020b00f8abd7620e4e48163d5640bb76">m_beam_particle_2</a>      );
<a name="l00162"></a>00162         m_weights.<a class="code" href="classHepMC_1_1WeightContainer.html#b84491cd61e30b13f33dacc9c4ea6b0e" title="swap">swap</a>(           other.<a class="code" href="classHepMC_1_1GenEvent.html#031fff460aa321d0663264dc74ffa14f">m_weights</a>  );
<a name="l00163"></a>00163         m_random_states.swap(     other.<a class="code" href="classHepMC_1_1GenEvent.html#062d6ee4886f217fabb93964f2e38d9b">m_random_states</a>  );
<a name="l00164"></a>00164         m_vertex_barcodes.swap(   other.<a class="code" href="classHepMC_1_1GenEvent.html#ce482cc5f7a75612ca23f84178d588f3">m_vertex_barcodes</a> );
<a name="l00165"></a>00165         m_particle_barcodes.swap( other.<a class="code" href="classHepMC_1_1GenEvent.html#bd5a96125e455c2517402eb099c6caf1">m_particle_barcodes</a> );
<a name="l00166"></a>00166         std::swap(m_heavy_ion            , other.<a class="code" href="classHepMC_1_1GenEvent.html#d292c25af9589ceda04823bacd1cbdb3">m_heavy_ion</a>            );
<a name="l00167"></a>00167         std::swap(m_pdf_info             , other.<a class="code" href="classHepMC_1_1GenEvent.html#e2b2ed66902655387b35fe5821e96776">m_pdf_info</a>             );
<a name="l00168"></a>00168     }
<a name="l00169"></a>00169 
<a name="l00170"></a><a class="code" href="classHepMC_1_1GenEvent.html#1b09f8e6675759528ee3f368025273f5">00170</a>     <a class="code" href="classHepMC_1_1GenEvent.html#1b09f8e6675759528ee3f368025273f5" title="deletes all vertices/particles in this evt">GenEvent::~GenEvent</a>() 
<a name="l00171"></a>00171     {
<a name="l00175"></a>00175         <a class="code" href="classHepMC_1_1GenEvent.html#e1d8afe655620e48f5f2c77775eed5d6" title="delete all vertices owned by this event">delete_all_vertices</a>();
<a name="l00176"></a>00176         <span class="keyword">delete</span> m_heavy_ion;
<a name="l00177"></a>00177         <span class="keyword">delete</span> m_pdf_info;
<a name="l00178"></a>00178         --s_counter;
<a name="l00179"></a>00179     }
<a name="l00180"></a>00180 
<a name="l00181"></a><a class="code" href="classHepMC_1_1GenEvent.html#9561e98806be56dc5e73ae51b3fd695c">00181</a>     <a class="code" href="classHepMC_1_1GenEvent.html" title="The GenEvent class is the core of HepMC.">GenEvent</a>&amp; <a class="code" href="classHepMC_1_1GenEvent.html#9561e98806be56dc5e73ae51b3fd695c" title="make a deep copy">GenEvent::operator=</a>( <span class="keyword">const</span> <a class="code" href="classHepMC_1_1GenEvent.html" title="The GenEvent class is the core of HepMC.">GenEvent</a>&amp; inevent ) 
<a name="l00182"></a>00182     {
<a name="l00184"></a>00184         <a class="code" href="classHepMC_1_1GenEvent.html" title="The GenEvent class is the core of HepMC.">GenEvent</a> tmp( inevent );
<a name="l00185"></a>00185         <a class="code" href="classHepMC_1_1GenEvent.html#b91e22dac83e6d886491816a8d993545" title="swap">swap</a>( tmp );
<a name="l00186"></a>00186         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188 
<a name="l00189"></a><a class="code" href="classHepMC_1_1GenEvent.html#ecccd1342eded80eac36738e121aa58c">00189</a>     <span class="keywordtype">void</span> <a class="code" href="classHepMC_1_1GenEvent.html#ecccd1342eded80eac36738e121aa58c" title="dumps to ostr">GenEvent::print</a>( std::ostream&amp; ostr )<span class="keyword"> const </span>{
<a name="l00194"></a>00194         ostr &lt;&lt; <span class="stringliteral">"________________________________________"</span>
<a name="l00195"></a>00195              &lt;&lt; <span class="stringliteral">"________________________________________\n"</span>;
<a name="l00196"></a>00196         ostr &lt;&lt; <span class="stringliteral">"GenEvent: #"</span> &lt;&lt; <a class="code" href="classHepMC_1_1GenEvent.html#f288e7a4cdeb1e4feb0f8ef1c59b24af" title="event number">event_number</a>() 
<a name="l00197"></a>00197              &lt;&lt; <span class="stringliteral">" ID="</span> &lt;&lt; <a class="code" href="classHepMC_1_1GenEvent.html#78279e392dff2c2c471782531f3d9892" title="unique signal process id">signal_process_id</a>() 
<a name="l00198"></a>00198              &lt;&lt; <span class="stringliteral">" SignalProcessGenVertex Barcode: "</span> 
<a name="l00199"></a>00199              &lt;&lt; ( <a class="code" href="classHepMC_1_1GenEvent.html#80d2394d34be19132b18a2c0c4edd8cf" title="pointer to the vertex containing the signal process">signal_process_vertex</a>() ? <a class="code" href="classHepMC_1_1GenEvent.html#80d2394d34be19132b18a2c0c4edd8cf" title="pointer to the vertex containing the signal process">signal_process_vertex</a>()-&gt;<a class="code" href="classHepMC_1_1GenVertex.html#8f35affbf9e3bd00ed7a5ecbc0f5fb53" title="unique identifier">barcode</a>()
<a name="l00200"></a>00200                   : 0 )
<a name="l00201"></a>00201              &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00202"></a>00202         ostr &lt;&lt; <span class="stringliteral">" Current Memory Usage: "</span> 
<a name="l00203"></a>00203              &lt;&lt; <a class="code" href="classHepMC_1_1GenEvent.html#98bedfb7c39dac5304deafd0ddcbac2c" title="num GenEvent objects in memory">GenEvent::counter</a>() &lt;&lt; <span class="stringliteral">" events, "</span>
<a name="l00204"></a>00204              &lt;&lt; <a class="code" href="classHepMC_1_1GenVertex.html#105ebb0a8012ebe900f1f5b173cfa90d" title="temporary for debugging">GenVertex::counter</a>() &lt;&lt; <span class="stringliteral">" vertices, "</span>
<a name="l00205"></a>00205              &lt;&lt; <a class="code" href="classHepMC_1_1GenParticle.html#3d9391d4669c579ce99ad9bde8992fbe" title="temporary for debugging">GenParticle::counter</a>() &lt;&lt; <span class="stringliteral">" particles.\n"</span>; 
<a name="l00206"></a>00206         ostr &lt;&lt; <span class="stringliteral">" Entries this event: "</span> &lt;&lt; <a class="code" href="classHepMC_1_1GenEvent.html#459a1460e96d03f6922bf843b24bd7d1" title="how many vertex barcodes exist?">vertices_size</a>() &lt;&lt; <span class="stringliteral">" vertices, "</span>
<a name="l00207"></a>00207              &lt;&lt; <a class="code" href="classHepMC_1_1GenEvent.html#07fdd081468ee568dc16f3f8c6efae8b" title="how many particle barcodes exist?">particles_size</a>() &lt;&lt; <span class="stringliteral">" particles.\n"</span>; 
<a name="l00208"></a>00208         <span class="keywordflow">if</span>( m_beam_particle_1 &amp;&amp; m_beam_particle_2 ) {
<a name="l00209"></a>00209           ostr &lt;&lt; <span class="stringliteral">" Beam Particle barcodes: "</span> &lt;&lt; <a class="code" href="classHepMC_1_1GenEvent.html#eebe9840d64ec5e75efa81dbb500d7a0" title="pair of pointers to the two incoming beam particles">beam_particles</a>().first-&gt;barcode() &lt;&lt; <span class="stringliteral">" "</span>
<a name="l00210"></a>00210                &lt;&lt; <a class="code" href="classHepMC_1_1GenEvent.html#eebe9840d64ec5e75efa81dbb500d7a0" title="pair of pointers to the two incoming beam particles">beam_particles</a>().second-&gt;barcode() &lt;&lt; <span class="stringliteral">" \n"</span>;
<a name="l00211"></a>00211         } <span class="keywordflow">else</span> {
<a name="l00212"></a>00212           ostr &lt;&lt; <span class="stringliteral">" Beam Particles are not defined.\n"</span>;
<a name="l00213"></a>00213         }
<a name="l00214"></a>00214         <span class="comment">// Random State</span>
<a name="l00215"></a>00215         ostr &lt;&lt; <span class="stringliteral">" RndmState("</span> &lt;&lt; m_random_states.size() &lt;&lt; <span class="stringliteral">")="</span>;
<a name="l00216"></a>00216         <span class="keywordflow">for</span> ( std::vector&lt;long int&gt;::const_iterator rs 
<a name="l00217"></a>00217                   = m_random_states.begin();
<a name="l00218"></a>00218               rs != m_random_states.end(); ++rs ) { ostr &lt;&lt; *rs &lt;&lt; <span class="stringliteral">" "</span>; }
<a name="l00219"></a>00219         ostr &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00220"></a>00220         <span class="comment">// Weights</span>
<a name="l00221"></a>00221         ostr &lt;&lt; <span class="stringliteral">" Wgts("</span> &lt;&lt; <a class="code" href="classHepMC_1_1GenEvent.html#3d91498964d094e3dfb8f8322315879a" title="direct access to WeightContainer">weights</a>().<a class="code" href="classHepMC_1_1WeightContainer.html#43fbe772685a7052693a4bde78a2b93e" title="size of weight container">size</a>() &lt;&lt; <span class="stringliteral">")="</span>;
<a name="l00222"></a>00222         <span class="keywordflow">for</span> ( <a class="code" href="classHepMC_1_1WeightContainer.html#47336573f54b8e7e6f0622b02cdba497" title="const iterator for the weight container">WeightContainer::const_iterator</a> wgt = <a class="code" href="classHepMC_1_1GenEvent.html#3d91498964d094e3dfb8f8322315879a" title="direct access to WeightContainer">weights</a>().begin();
<a name="l00223"></a>00223               wgt != <a class="code" href="classHepMC_1_1GenEvent.html#3d91498964d094e3dfb8f8322315879a" title="direct access to WeightContainer">weights</a>().<a class="code" href="classHepMC_1_1WeightContainer.html#972a0daa1bf368361f0fdcf4dc509460" title="end of the weight container">end</a>(); ++wgt ) { ostr &lt;&lt; *wgt &lt;&lt; <span class="stringliteral">" "</span>; }
<a name="l00224"></a>00224         ostr &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00225"></a>00225         ostr &lt;&lt; <span class="stringliteral">" EventScale "</span> &lt;&lt; <a class="code" href="classHepMC_1_1GenEvent.html#dc50003fa5882060e15367af393b72cf" title="energy scale, see hep-ph/0109068">event_scale</a>() 
<a name="l00226"></a>00226              &lt;&lt; <span class="stringliteral">" [energy] \t alphaQCD="</span> &lt;&lt; <a class="code" href="classHepMC_1_1GenEvent.html#6b58ada08199748d004c946a21142330" title="QCD coupling, see hep-ph/0109068.">alphaQCD</a>() 
<a name="l00227"></a>00227              &lt;&lt; <span class="stringliteral">"\t alphaQED="</span> &lt;&lt; <a class="code" href="classHepMC_1_1GenEvent.html#8dfff09cf3eec2c2e9fc416b24138bc2">alphaQED</a>() &lt;&lt; std::endl;
<a name="l00228"></a>00228         <span class="comment">// print a legend to describe the particle info</span>
<a name="l00229"></a>00229         ostr &lt;&lt; <span class="stringliteral">"                                    GenParticle Legend\n"</span>;
<a name="l00230"></a>00230         ostr  &lt;&lt; <span class="stringliteral">"        Barcode   PDG ID      "</span>
<a name="l00231"></a>00231               &lt;&lt; <span class="stringliteral">"( Px,       Py,       Pz,     E )"</span>
<a name="l00232"></a>00232               &lt;&lt; <span class="stringliteral">" Stat  DecayVtx\n"</span>;
<a name="l00233"></a>00233         ostr &lt;&lt; <span class="stringliteral">"________________________________________"</span>
<a name="l00234"></a>00234              &lt;&lt; <span class="stringliteral">"________________________________________\n"</span>;
<a name="l00235"></a>00235         <span class="comment">// Print all Vertices</span>
<a name="l00236"></a>00236         <span class="keywordflow">for</span> ( <a class="code" href="classHepMC_1_1GenEvent_1_1vertex__const__iterator.html" title="const vertex iterator">GenEvent::vertex_const_iterator</a> vtx = this-&gt;vertices_begin();
<a name="l00237"></a>00237               vtx != this-&gt;<a class="code" href="classHepMC_1_1GenEvent.html#a6fd4a90d8eb096f95215ad5c18d6a7c" title="end vertex iteration">vertices_end</a>(); ++vtx ) {
<a name="l00238"></a>00238             (*vtx)-&gt;print(ostr); 
<a name="l00239"></a>00239         }
<a name="l00240"></a>00240         ostr &lt;&lt; <span class="stringliteral">"________________________________________"</span>
<a name="l00241"></a>00241              &lt;&lt; <span class="stringliteral">"________________________________________"</span> &lt;&lt; std::endl;
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243 
<a name="l00244"></a><a class="code" href="classHepMC_1_1GenEvent.html#c1421c5af8fcddb4095ea8b0afb68eba">00244</a>     <span class="keywordtype">void</span> <a class="code" href="classHepMC_1_1GenEvent.html#c1421c5af8fcddb4095ea8b0afb68eba" title="dumps release version to ostr">GenEvent::print_version</a>( std::ostream&amp; ostr )<span class="keyword"> const </span>{
<a name="l00245"></a>00245         ostr &lt;&lt; <span class="stringliteral">"---------------------------------------------"</span> &lt;&lt; std::endl;
<a name="l00246"></a>00246         <a class="code" href="namespaceHepMC.html#5d93c39b4f6ab4943c67c798858d8e73" title="write HepMC version to os">writeVersion</a>( ostr );
<a name="l00247"></a>00247         ostr &lt;&lt; <span class="stringliteral">"---------------------------------------------"</span> &lt;&lt; std::endl;
<a name="l00248"></a>00248     }
<a name="l00249"></a>00249 
<a name="l00250"></a><a class="code" href="classHepMC_1_1GenEvent.html#351fd8c688bb1791877a56a956c8b005">00250</a>     <span class="keywordtype">bool</span> <a class="code" href="classHepMC_1_1GenEvent.html#351fd8c688bb1791877a56a956c8b005" title="adds to evt and adopts">GenEvent::add_vertex</a>( <a class="code" href="classHepMC_1_1GenVertex.html" title="GenVertex contains information about decay vertices.">GenVertex</a>* vtx ) {
<a name="l00253"></a>00253         <span class="keywordflow">if</span> ( !vtx ) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00254"></a>00254         <span class="comment">// if vtx previously pointed to another GenEvent, remove it from that</span>
<a name="l00255"></a>00255         <span class="comment">// GenEvent's list</span>
<a name="l00256"></a>00256         <span class="keywordflow">if</span> ( vtx-&gt;<a class="code" href="classHepMC_1_1GenVertex.html#166e6d45b051f1cabcf607d93cbec0a1" title="pointer to the event that owns this vertex">parent_event</a>() &amp;&amp; vtx-&gt;<a class="code" href="classHepMC_1_1GenVertex.html#166e6d45b051f1cabcf607d93cbec0a1" title="pointer to the event that owns this vertex">parent_event</a>() != this ) {
<a name="l00257"></a>00257             <span class="keywordtype">bool</span> remove_status = vtx-&gt;<a class="code" href="classHepMC_1_1GenVertex.html#166e6d45b051f1cabcf607d93cbec0a1" title="pointer to the event that owns this vertex">parent_event</a>()-&gt;<a class="code" href="classHepMC_1_1GenEvent.html#ae6950d2bd7eeb37fae439928162e147" title="erases vtx from evt">remove_vertex</a>( vtx );
<a name="l00258"></a>00258             <span class="keywordflow">if</span> ( !remove_status ) {            
<a name="l00259"></a>00259                 std::cerr &lt;&lt; <span class="stringliteral">"GenEvent::add_vertex ERROR "</span>
<a name="l00260"></a>00260                           &lt;&lt; <span class="stringliteral">"GenVertex::parent_event points to \n"</span>
<a name="l00261"></a>00261                           &lt;&lt; <span class="stringliteral">"an event that does not point back to the "</span>
<a name="l00262"></a>00262                           &lt;&lt; <span class="stringliteral">"GenVertex. \n This probably indicates a deeper "</span>
<a name="l00263"></a>00263                           &lt;&lt; <span class="stringliteral">"problem. "</span> &lt;&lt; std::endl;
<a name="l00264"></a>00264             }
<a name="l00265"></a>00265         }
<a name="l00266"></a>00266         <span class="comment">//</span>
<a name="l00267"></a>00267         <span class="comment">// setting the vertex parent also inserts the vertex into this</span>
<a name="l00268"></a>00268         <span class="comment">// event</span>
<a name="l00269"></a>00269         vtx-&gt;<a class="code" href="classHepMC_1_1GenVertex.html#70076beb6b1ac29693ba1f3a3296582f" title="set parent event">set_parent_event_</a>( <span class="keyword">this</span> );
<a name="l00270"></a>00270         <span class="keywordflow">return</span> ( m_vertex_barcodes.count(vtx-&gt;<a class="code" href="classHepMC_1_1GenVertex.html#8f35affbf9e3bd00ed7a5ecbc0f5fb53" title="unique identifier">barcode</a>()) ? <span class="keyword">true</span> : <span class="keyword">false</span> );
<a name="l00271"></a>00271     }
<a name="l00272"></a>00272 
<a name="l00273"></a><a class="code" href="classHepMC_1_1GenEvent.html#ae6950d2bd7eeb37fae439928162e147">00273</a>     <span class="keywordtype">bool</span> <a class="code" href="classHepMC_1_1GenEvent.html#ae6950d2bd7eeb37fae439928162e147" title="erases vtx from evt">GenEvent::remove_vertex</a>( <a class="code" href="classHepMC_1_1GenVertex.html" title="GenVertex contains information about decay vertices.">GenVertex</a>* vtx ) {
<a name="l00276"></a>00276         <span class="keywordflow">if</span> ( m_signal_process_vertex == vtx ) m_signal_process_vertex = 0;
<a name="l00277"></a>00277         <span class="keywordflow">if</span> ( vtx-&gt;<a class="code" href="classHepMC_1_1GenVertex.html#166e6d45b051f1cabcf607d93cbec0a1" title="pointer to the event that owns this vertex">parent_event</a>() == this ) vtx-&gt;<a class="code" href="classHepMC_1_1GenVertex.html#70076beb6b1ac29693ba1f3a3296582f" title="set parent event">set_parent_event_</a>( 0 );
<a name="l00278"></a>00278         <span class="keywordflow">return</span> ( m_vertex_barcodes.count(vtx-&gt;<a class="code" href="classHepMC_1_1GenVertex.html#8f35affbf9e3bd00ed7a5ecbc0f5fb53" title="unique identifier">barcode</a>()) ? <span class="keyword">false</span> : <span class="keyword">true</span> );
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280 
<a name="l00281"></a><a class="code" href="classHepMC_1_1GenEvent.html#ac75163864b7577171003c37f836041d">00281</a>     <span class="keywordtype">void</span> <a class="code" href="classHepMC_1_1GenEvent.html#ac75163864b7577171003c37f836041d" title="empties the entire event">GenEvent::clear</a>() 
<a name="l00282"></a>00282     {
<a name="l00286"></a>00286         <a class="code" href="classHepMC_1_1GenEvent.html#e1d8afe655620e48f5f2c77775eed5d6" title="delete all vertices owned by this event">delete_all_vertices</a>();
<a name="l00287"></a>00287         <span class="keyword">delete</span> m_heavy_ion;
<a name="l00288"></a>00288         <span class="keyword">delete</span> m_pdf_info;
<a name="l00289"></a>00289         m_signal_process_id = 0;
<a name="l00290"></a>00290         m_beam_particle_1 = 0;
<a name="l00291"></a>00291         m_beam_particle_2 = 0;
<a name="l00292"></a>00292         m_event_number = 0;
<a name="l00293"></a>00293         m_event_scale = -1;
<a name="l00294"></a>00294         m_alphaQCD = -1;
<a name="l00295"></a>00295         m_alphaQED = -1;
<a name="l00296"></a>00296         m_weights = std::vector&lt;double&gt;();
<a name="l00297"></a>00297         m_random_states = std::vector&lt;long int&gt;();
<a name="l00298"></a>00298         <span class="comment">// error check just to be safe</span>
<a name="l00299"></a>00299         <span class="keywordflow">if</span> ( m_vertex_barcodes.size() != 0 
<a name="l00300"></a>00300              || m_particle_barcodes.size() != 0 ) {
<a name="l00301"></a>00301             std::cerr &lt;&lt; <span class="stringliteral">"GenEvent::clear() strange result ... \n"</span>
<a name="l00302"></a>00302                       &lt;&lt; <span class="stringliteral">"either the particle and/or the vertex map isn't empty"</span> &lt;&lt; std::endl;
<a name="l00303"></a>00303             std::cerr &lt;&lt; <span class="stringliteral">"Number vtx,particle the event after deleting = "</span>
<a name="l00304"></a>00304                       &lt;&lt; m_vertex_barcodes.size() &lt;&lt; <span class="stringliteral">"  "</span> 
<a name="l00305"></a>00305                       &lt;&lt; m_particle_barcodes.size() &lt;&lt; std::endl;
<a name="l00306"></a>00306             std::cerr &lt;&lt; <span class="stringliteral">"Total Number vtx,particle in memory "</span>
<a name="l00307"></a>00307                       &lt;&lt; <span class="stringliteral">"after method called = "</span>
<a name="l00308"></a>00308                       &lt;&lt; <a class="code" href="classHepMC_1_1GenVertex.html#105ebb0a8012ebe900f1f5b173cfa90d" title="temporary for debugging">GenVertex::counter</a>() &lt;&lt; <span class="stringliteral">"\t"</span>
<a name="l00309"></a>00309                       &lt;&lt; <a class="code" href="classHepMC_1_1GenParticle.html#3d9391d4669c579ce99ad9bde8992fbe" title="temporary for debugging">GenParticle::counter</a>() &lt;&lt; std::endl;
<a name="l00310"></a>00310         }
<a name="l00311"></a>00311         <span class="keywordflow">return</span>;
<a name="l00312"></a>00312     }
<a name="l00313"></a>00313     
<a name="l00314"></a><a class="code" href="classHepMC_1_1GenEvent.html#e1d8afe655620e48f5f2c77775eed5d6">00314</a>     <span class="keywordtype">void</span> <a class="code" href="classHepMC_1_1GenEvent.html#e1d8afe655620e48f5f2c77775eed5d6" title="delete all vertices owned by this event">GenEvent::delete_all_vertices</a>() {
<a name="l00320"></a>00320 
<a name="l00321"></a>00321         <span class="comment">// delete each vertex individually (this deletes particles as well)</span>
<a name="l00322"></a>00322         <span class="keywordflow">while</span> ( !<a class="code" href="classHepMC_1_1GenEvent.html#29fa7807390935e773464fb6e286ad23" title="return true if there are no vertex barcodes">vertices_empty</a>() ) {
<a name="l00323"></a>00323             <a class="code" href="classHepMC_1_1GenVertex.html" title="GenVertex contains information about decay vertices.">GenVertex</a>* vtx = ( m_vertex_barcodes.begin() )-&gt;second;
<a name="l00324"></a>00324             m_vertex_barcodes.erase( m_vertex_barcodes.begin() );
<a name="l00325"></a>00325             <span class="keyword">delete</span> vtx;
<a name="l00326"></a>00326         }
<a name="l00327"></a>00327         <span class="comment">//</span>
<a name="l00328"></a>00328         <span class="comment">// Error checking:</span>
<a name="l00329"></a>00329         <span class="keywordflow">if</span> ( !<a class="code" href="classHepMC_1_1GenEvent.html#29fa7807390935e773464fb6e286ad23" title="return true if there are no vertex barcodes">vertices_empty</a>() || ! <a class="code" href="classHepMC_1_1GenEvent.html#4a648356ef2ed3033fe84253062c267e" title="return true if there are no particle barcodes">particles_empty</a>() ) {
<a name="l00330"></a>00330             std::cerr &lt;&lt; <span class="stringliteral">"GenEvent::delete_all_vertices strange result ... "</span>
<a name="l00331"></a>00331                       &lt;&lt; <span class="stringliteral">"after deleting all vertices, \nthe particle and "</span>
<a name="l00332"></a>00332                       &lt;&lt; <span class="stringliteral">"vertex maps aren't empty.\n  This probably "</span> 
<a name="l00333"></a>00333                       &lt;&lt; <span class="stringliteral">"indicates deeper problems or memory leak in the "</span>
<a name="l00334"></a>00334                       &lt;&lt; <span class="stringliteral">"code."</span> &lt;&lt; std::endl;
<a name="l00335"></a>00335             std::cerr &lt;&lt; <span class="stringliteral">"Number vtx,particle the event after deleting = "</span>
<a name="l00336"></a>00336                       &lt;&lt; m_vertex_barcodes.size() &lt;&lt; <span class="stringliteral">"  "</span> 
<a name="l00337"></a>00337                       &lt;&lt; m_particle_barcodes.size() &lt;&lt; std::endl;
<a name="l00338"></a>00338             std::cerr &lt;&lt; <span class="stringliteral">"Total Number vtx,particle in memory "</span>
<a name="l00339"></a>00339                       &lt;&lt; <span class="stringliteral">"after method called = "</span>
<a name="l00340"></a>00340                       &lt;&lt; <a class="code" href="classHepMC_1_1GenVertex.html#105ebb0a8012ebe900f1f5b173cfa90d" title="temporary for debugging">GenVertex::counter</a>() &lt;&lt; <span class="stringliteral">"\t"</span>
<a name="l00341"></a>00341                       &lt;&lt; <a class="code" href="classHepMC_1_1GenParticle.html#3d9391d4669c579ce99ad9bde8992fbe" title="temporary for debugging">GenParticle::counter</a>() &lt;&lt; std::endl;
<a name="l00342"></a>00342         }
<a name="l00343"></a>00343     }
<a name="l00344"></a>00344     
<a name="l00345"></a><a class="code" href="classHepMC_1_1GenEvent.html#a91f815859d75cb9976f49d32a9b39c8">00345</a>     <span class="keywordtype">bool</span> <a class="code" href="classHepMC_1_1GenEvent.html#a91f815859d75cb9976f49d32a9b39c8" title="set the barcode - intended for use by GenParticle">GenEvent::set_barcode</a>( <a class="code" href="classHepMC_1_1GenParticle.html" title="The GenParticle class contains information about generated particles.">GenParticle</a>* <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a>, <span class="keywordtype">int</span> suggested_barcode )
<a name="l00346"></a>00346     {
<a name="l00347"></a>00347         <span class="keywordflow">if</span> ( <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a>-&gt;parent_event() != this ) {
<a name="l00348"></a>00348             std::cerr &lt;&lt; <span class="stringliteral">"GenEvent::set_barcode attempted, but the argument's"</span>
<a name="l00349"></a>00349                       &lt;&lt; <span class="stringliteral">"\n parent_event is not this ... request rejected."</span>
<a name="l00350"></a>00350                       &lt;&lt; std::endl;
<a name="l00351"></a>00351             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00352"></a>00352         }
<a name="l00353"></a>00353         <span class="comment">// M.Dobbs  Nov 4, 2002</span>
<a name="l00354"></a>00354         <span class="comment">// First we must check to see if the particle already has a</span>
<a name="l00355"></a>00355         <span class="comment">// barcode which is different from the suggestion. If yes, we</span>
<a name="l00356"></a>00356         <span class="comment">// remove it from the particle map.</span>
<a name="l00357"></a>00357         <span class="keywordflow">if</span> ( <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a>-&gt;barcode() != 0 &amp;&amp; <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a>-&gt;barcode() != suggested_barcode ) {
<a name="l00358"></a>00358             <span class="keywordflow">if</span> ( m_particle_barcodes.count(<a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a>-&gt;barcode()) &amp;&amp;
<a name="l00359"></a>00359                  m_particle_barcodes[<a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a>-&gt;barcode()] == <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a> ) {
<a name="l00360"></a>00360                 m_particle_barcodes.erase( <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a>-&gt;barcode() );
<a name="l00361"></a>00361             }
<a name="l00362"></a>00362             <span class="comment">// At this point either the particle is NOT in</span>
<a name="l00363"></a>00363             <span class="comment">// m_particle_barcodes, or else it is in the map, but</span>
<a name="l00364"></a>00364             <span class="comment">// already with the suggested barcode.</span>
<a name="l00365"></a>00365         }
<a name="l00366"></a>00366         <span class="comment">//</span>
<a name="l00367"></a>00367         <span class="comment">// First case --- a valid barcode has been suggested</span>
<a name="l00368"></a>00368         <span class="comment">//     (valid barcodes are numbers greater than zero)</span>
<a name="l00369"></a>00369         <span class="keywordtype">bool</span> insert_success = <span class="keyword">true</span>;
<a name="l00370"></a>00370         <span class="keywordflow">if</span> ( suggested_barcode &gt; 0 ) {
<a name="l00371"></a>00371             <span class="keywordflow">if</span> ( m_particle_barcodes.count(suggested_barcode) ) {
<a name="l00372"></a>00372                 <span class="comment">// the suggested_barcode is already used.</span>
<a name="l00373"></a>00373                 <span class="keywordflow">if</span> ( m_particle_barcodes[suggested_barcode] == <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a> ) {
<a name="l00374"></a>00374                     <span class="comment">// but it was used for this particle ... so everythings ok</span>
<a name="l00375"></a>00375                     <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a>-&gt;set_barcode_( suggested_barcode );
<a name="l00376"></a>00376                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00377"></a>00377                 }
<a name="l00378"></a>00378                 insert_success = <span class="keyword">false</span>;
<a name="l00379"></a>00379                 suggested_barcode = 0;
<a name="l00380"></a>00380             } <span class="keywordflow">else</span> { <span class="comment">// suggested barcode is OK, proceed to insert</span>
<a name="l00381"></a>00381                 m_particle_barcodes[suggested_barcode] = <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a>;
<a name="l00382"></a>00382                 <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a>-&gt;set_barcode_( suggested_barcode );
<a name="l00383"></a>00383                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00384"></a>00384             }
<a name="l00385"></a>00385         }
<a name="l00386"></a>00386         <span class="comment">//</span>
<a name="l00387"></a>00387         <span class="comment">// Other possibility -- a valid barcode has not been suggested,</span>
<a name="l00388"></a>00388         <span class="comment">//    so one is automatically generated</span>
<a name="l00389"></a>00389         <span class="keywordflow">if</span> ( suggested_barcode &lt; 0 ) insert_success = <span class="keyword">false</span>;
<a name="l00390"></a>00390         <span class="keywordflow">if</span> ( suggested_barcode &lt;= 0 ) {
<a name="l00391"></a>00391             <span class="keywordflow">if</span> ( !m_particle_barcodes.empty() ) {
<a name="l00392"></a>00392                 <span class="comment">// in this case we find the highest barcode that was used,</span>
<a name="l00393"></a>00393                 <span class="comment">// and increment it by 1</span>
<a name="l00394"></a>00394                 suggested_barcode = m_particle_barcodes.rbegin()-&gt;first;
<a name="l00395"></a>00395                 ++suggested_barcode;
<a name="l00396"></a>00396             }
<a name="l00397"></a>00397             <span class="comment">// For the automatically assigned barcodes, the first one</span>
<a name="l00398"></a>00398             <span class="comment">//   we use is 10001 ... this is just because when we read </span>
<a name="l00399"></a>00399             <span class="comment">//   events from HEPEVT, we will suggest their index as the</span>
<a name="l00400"></a>00400             <span class="comment">//   barcode, and that index has maximum value 10000.</span>
<a name="l00401"></a>00401             <span class="comment">//  This way we will immediately be able to recognize the hepevt</span>
<a name="l00402"></a>00402             <span class="comment">//   particles from the auto-assigned ones.</span>
<a name="l00403"></a>00403             <span class="keywordflow">if</span> ( suggested_barcode &lt;= 10000 ) suggested_barcode = 10001;
<a name="l00404"></a>00404         }
<a name="l00405"></a>00405         <span class="comment">// At this point we should have a valid barcode</span>
<a name="l00406"></a>00406         <span class="keywordflow">if</span> ( m_particle_barcodes.count(suggested_barcode) ) {
<a name="l00407"></a>00407             std::cerr &lt;&lt; <span class="stringliteral">"GenEvent::set_barcode ERROR, this should never "</span>
<a name="l00408"></a>00408                       &lt;&lt; <span class="stringliteral">"happen \n report bug to matt.dobbs@cern.ch"</span> 
<a name="l00409"></a>00409                       &lt;&lt; std::endl;
<a name="l00410"></a>00410         }
<a name="l00411"></a>00411         m_particle_barcodes[suggested_barcode] = <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a>;
<a name="l00412"></a>00412         <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a>-&gt;set_barcode_( suggested_barcode );
<a name="l00413"></a>00413         <span class="keywordflow">return</span> insert_success;
<a name="l00414"></a>00414     }
<a name="l00415"></a>00415 
<a name="l00416"></a><a class="code" href="classHepMC_1_1GenEvent.html#8fcbdfaf9ac5028bc96d532a303daf2e">00416</a>     <span class="keywordtype">bool</span> <a class="code" href="classHepMC_1_1GenEvent.html#a91f815859d75cb9976f49d32a9b39c8" title="set the barcode - intended for use by GenParticle">GenEvent::set_barcode</a>( <a class="code" href="classHepMC_1_1GenVertex.html" title="GenVertex contains information about decay vertices.">GenVertex</a>* <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a>, <span class="keywordtype">int</span> suggested_barcode )
<a name="l00417"></a>00417     {
<a name="l00418"></a>00418         <span class="keywordflow">if</span> ( <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a>-&gt;parent_event() != this ) {
<a name="l00419"></a>00419             std::cerr &lt;&lt; <span class="stringliteral">"GenEvent::set_barcode attempted, but the argument's"</span>
<a name="l00420"></a>00420                       &lt;&lt; <span class="stringliteral">"\n parent_event is not this ... request rejected."</span>
<a name="l00421"></a>00421                       &lt;&lt; std::endl;
<a name="l00422"></a>00422             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00423"></a>00423         }
<a name="l00424"></a>00424         <span class="comment">// M.Dobbs Nov 4, 2002</span>
<a name="l00425"></a>00425         <span class="comment">// First we must check to see if the vertex already has a</span>
<a name="l00426"></a>00426         <span class="comment">// barcode which is different from the suggestion. If yes, we</span>
<a name="l00427"></a>00427         <span class="comment">// remove it from the vertex map.</span>
<a name="l00428"></a>00428         <span class="keywordflow">if</span> ( <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a>-&gt;barcode() != 0 &amp;&amp; <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a>-&gt;barcode() != suggested_barcode ) {
<a name="l00429"></a>00429             <span class="keywordflow">if</span> ( m_vertex_barcodes.count(<a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a>-&gt;barcode()) &amp;&amp;
<a name="l00430"></a>00430                  m_vertex_barcodes[<a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a>-&gt;barcode()] == <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a> ) {
<a name="l00431"></a>00431                 m_vertex_barcodes.erase( <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a>-&gt;barcode() );
<a name="l00432"></a>00432             }
<a name="l00433"></a>00433             <span class="comment">// At this point either the vertex is NOT in</span>
<a name="l00434"></a>00434             <span class="comment">// m_vertex_barcodes, or else it is in the map, but</span>
<a name="l00435"></a>00435             <span class="comment">// already with the suggested barcode.</span>
<a name="l00436"></a>00436         }
<a name="l00437"></a>00437         
<a name="l00438"></a>00438         <span class="comment">//</span>
<a name="l00439"></a>00439         <span class="comment">// First case --- a valid barcode has been suggested</span>
<a name="l00440"></a>00440         <span class="comment">//     (valid barcodes are numbers greater than zero)</span>
<a name="l00441"></a>00441         <span class="keywordtype">bool</span> insert_success = <span class="keyword">true</span>;
<a name="l00442"></a>00442         <span class="keywordflow">if</span> ( suggested_barcode &lt; 0 ) {
<a name="l00443"></a>00443             <span class="keywordflow">if</span> ( m_vertex_barcodes.count(suggested_barcode) ) {
<a name="l00444"></a>00444                 <span class="comment">// the suggested_barcode is already used.</span>
<a name="l00445"></a>00445                 <span class="keywordflow">if</span> ( m_vertex_barcodes[suggested_barcode] == <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a> ) {
<a name="l00446"></a>00446                     <span class="comment">// but it was used for this vertex ... so everythings ok</span>
<a name="l00447"></a>00447                     <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a>-&gt;set_barcode_( suggested_barcode );
<a name="l00448"></a>00448                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00449"></a>00449                 }
<a name="l00450"></a>00450                 insert_success = <span class="keyword">false</span>;
<a name="l00451"></a>00451                 suggested_barcode = 0;
<a name="l00452"></a>00452             } <span class="keywordflow">else</span> { <span class="comment">// suggested barcode is OK, proceed to insert</span>
<a name="l00453"></a>00453                 m_vertex_barcodes[suggested_barcode] = <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a>;
<a name="l00454"></a>00454                 <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a>-&gt;set_barcode_( suggested_barcode );
<a name="l00455"></a>00455                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00456"></a>00456             }
<a name="l00457"></a>00457         }
<a name="l00458"></a>00458         <span class="comment">//</span>
<a name="l00459"></a>00459         <span class="comment">// Other possibility -- a valid barcode has not been suggested,</span>
<a name="l00460"></a>00460         <span class="comment">//    so one is automatically generated</span>
<a name="l00461"></a>00461         <span class="keywordflow">if</span> ( suggested_barcode &gt; 0 ) insert_success = <span class="keyword">false</span>;
<a name="l00462"></a>00462         <span class="keywordflow">if</span> ( suggested_barcode &gt;= 0 ) {
<a name="l00463"></a>00463             <span class="keywordflow">if</span> ( !m_vertex_barcodes.empty() ) {
<a name="l00464"></a>00464                 <span class="comment">// in this case we find the highest barcode that was used,</span>
<a name="l00465"></a>00465                 <span class="comment">// and increment it by 1, (vertex barcodes are negative)</span>
<a name="l00466"></a>00466                 suggested_barcode = m_vertex_barcodes.rbegin()-&gt;first;
<a name="l00467"></a>00467                 --suggested_barcode;
<a name="l00468"></a>00468             }
<a name="l00469"></a>00469             <span class="keywordflow">if</span> ( suggested_barcode &gt;= 0 ) suggested_barcode = -1;
<a name="l00470"></a>00470         }
<a name="l00471"></a>00471         <span class="comment">// At this point we should have a valid barcode</span>
<a name="l00472"></a>00472         <span class="keywordflow">if</span> ( m_vertex_barcodes.count(suggested_barcode) ) {
<a name="l00473"></a>00473             std::cerr &lt;&lt; <span class="stringliteral">"GenEvent::set_barcode ERROR, this should never "</span>
<a name="l00474"></a>00474                       &lt;&lt; <span class="stringliteral">"happen \n report bug to matt.dobbs@cern.ch"</span> 
<a name="l00475"></a>00475                       &lt;&lt; std::endl;
<a name="l00476"></a>00476         }
<a name="l00477"></a>00477         m_vertex_barcodes[suggested_barcode] = <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a>;
<a name="l00478"></a>00478         <a class="code" href="PythiaWrapper5__720_8h.html#015eddda8d78be6655b61bc37112c89c">v</a>-&gt;set_barcode_( suggested_barcode );
<a name="l00479"></a>00479         <span class="keywordflow">return</span> insert_success;
<a name="l00480"></a>00480     }
<a name="l00481"></a>00481 
<a name="l00483"></a><a class="code" href="classHepMC_1_1GenEvent.html#47396f14262903d2a27faf323dfd2798">00483</a>     <span class="keywordtype">bool</span>  <a class="code" href="classHepMC_1_1GenEvent.html#47396f14262903d2a27faf323dfd2798" title="test to see if we have two valid beam particles">GenEvent::valid_beam_particles</a>()<span class="keyword"> const </span>{
<a name="l00484"></a>00484         <span class="keywordtype">bool</span> have1 = <span class="keyword">false</span>;
<a name="l00485"></a>00485         <span class="keywordtype">bool</span> have2 = <span class="keyword">false</span>;
<a name="l00486"></a>00486         <span class="comment">// first check that both are defined</span>
<a name="l00487"></a>00487         <span class="keywordflow">if</span>(m_beam_particle_1 &amp;&amp; m_beam_particle_2) {
<a name="l00488"></a>00488             <span class="comment">// now look for a match with the particle "list"</span>
<a name="l00489"></a>00489             <span class="keywordflow">for</span> ( <a class="code" href="classHepMC_1_1GenEvent_1_1particle__const__iterator.html" title="const particle iterator">particle_const_iterator</a> <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a> = <a class="code" href="classHepMC_1_1GenEvent.html#a7e3c5e99982b837a5dddac952467919" title="begin particle iteration">particles_begin</a>();
<a name="l00490"></a>00490                   <a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a> != <a class="code" href="classHepMC_1_1GenEvent.html#facd3ef23718acc13770f2dc467836e9" title="end particle iteration">particles_end</a>(); ++<a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a> ) {
<a name="l00491"></a>00491                 <span class="keywordflow">if</span>( m_beam_particle_1 == *<a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a> ) have1 = <span class="keyword">true</span>;
<a name="l00492"></a>00492                 <span class="keywordflow">if</span>( m_beam_particle_2 == *<a class="code" href="PythiaWrapper5__720_8h.html#8e241458f851615b53df90ab6231f85e">p</a> ) have2 = <span class="keyword">true</span>;
<a name="l00493"></a>00493             }
<a name="l00494"></a>00494         }
<a name="l00495"></a>00495         <span class="keywordflow">if</span>( have1 &amp;&amp; have2 ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00496"></a>00496         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00497"></a>00497     }
<a name="l00498"></a>00498     
<a name="l00501"></a><a class="code" href="classHepMC_1_1GenEvent.html#fc5841ea5b2f05df61a36579c428769e">00501</a>     <span class="keywordtype">bool</span>  <a class="code" href="classHepMC_1_1GenEvent.html#fc5841ea5b2f05df61a36579c428769e" title="set incoming beam particles">GenEvent::set_beam_particles</a>(<a class="code" href="classHepMC_1_1GenParticle.html" title="The GenParticle class contains information about generated particles.">GenParticle</a>* bp1, <a class="code" href="classHepMC_1_1GenParticle.html" title="The GenParticle class contains information about generated particles.">GenParticle</a>* bp2) {
<a name="l00502"></a>00502         m_beam_particle_1 = bp1;
<a name="l00503"></a>00503         m_beam_particle_2 = bp2;
<a name="l00504"></a>00504         <span class="keywordflow">if</span>( m_beam_particle_1 &amp;&amp; m_beam_particle_2 ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00505"></a>00505         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00506"></a>00506     }
<a name="l00507"></a>00507 
<a name="l00510"></a>00510     <span class="keywordtype">bool</span>  <a class="code" href="classHepMC_1_1GenEvent.html#fc5841ea5b2f05df61a36579c428769e" title="set incoming beam particles">GenEvent::set_beam_particles</a>(std::pair&lt;GenParticle*, GenParticle*&gt; <span class="keyword">const</span> &amp; bp) {
<a name="l00511"></a>00511         <span class="keywordflow">return</span> <a class="code" href="classHepMC_1_1GenEvent.html#fc5841ea5b2f05df61a36579c428769e" title="set incoming beam particles">set_beam_particles</a>(bp.first,bp.second);
<a name="l00512"></a>00512     }
<a name="l00513"></a>00513 
<a name="l00515"></a>00515     <span class="comment">// Static  //</span>
<a name="l00517"></a><a class="code" href="classHepMC_1_1GenEvent.html#98bedfb7c39dac5304deafd0ddcbac2c">00517</a> <span class="comment"></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classHepMC_1_1GenEvent.html#98bedfb7c39dac5304deafd0ddcbac2c" title="num GenEvent objects in memory">GenEvent::counter</a>() { <span class="keywordflow">return</span> s_counter; }
<a name="l00518"></a>00518     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> GenEvent::s_counter = 0; 
<a name="l00519"></a>00519 
<a name="l00520"></a>00520 } <span class="comment">// HepMC</span>
<a name="l00521"></a>00521 
<a name="l00522"></a>00522 
<a name="l00523"></a>00523 
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Tue Oct 23 17:05:35 2007 for HepMC by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-3 </small></address>
</body>
</html>
